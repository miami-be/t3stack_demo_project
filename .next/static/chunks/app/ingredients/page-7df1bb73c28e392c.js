(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{1371:(e,n,a)=>{Promise.resolve().then(a.bind(a,3315))},3315:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>r});var t=a(5155),s=a(2115);function r(){var e,n,a,r,l;let[d,i]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[o,m]=(0,s.useState)({}),[p,h]=(0,s.useState)(null);function x(e){m({...o,[e.target.name]:e.target.value})}async function b(e){e.preventDefault();let n=await fetch("/api/ingredients"+(p?"/".concat(p):""),{method:p?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});await n.json(),m({}),h(null);let a=await fetch("/api/ingredients");i(await a.json())}return(0,s.useEffect)(()=>{fetch("/api/ingredients").then(async e=>i(await e.json())),fetch("/api/measurement-units").then(async e=>u(await e.json()))},[]),(0,t.jsxs)("div",{className:"p-8 max-w-2xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Ingredients"}),(0,t.jsxs)("form",{onSubmit:b,className:"mb-6 space-y-2",children:[(0,t.jsx)("input",{name:"name",placeholder:"Name",value:null!=(e=o.name)?e:"",onChange:x,className:"border p-2 rounded w-full",required:!0}),(0,t.jsx)("input",{name:"quantity",placeholder:"Quantity",type:"number",value:null!=(n=o.quantity)?n:"",onChange:x,className:"border p-2 rounded w-full",required:!0}),(0,t.jsx)("input",{name:"cost",placeholder:"Cost",type:"number",value:null!=(a=o.cost)?a:"",onChange:x,className:"border p-2 rounded w-full",required:!0}),(0,t.jsx)("input",{name:"supplierId",placeholder:"Supplier ID",value:null!=(r=o.supplierId)?r:"",onChange:x,className:"border p-2 rounded w-full",required:!0}),(0,t.jsxs)("select",{name:"measurementUnitId",value:null!=(l=o.measurementUnitId)?l:"",onChange:x,className:"border p-2 rounded w-full",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select unit"}),c.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]}),(0,t.jsxs)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:[p?"Update":"Add"," Ingredient"]}),p&&(0,t.jsx)("button",{type:"button",className:"ml-2 px-4 py-2 rounded border",onClick:()=>{m({}),h(null)},children:"Cancel"})]}),(0,t.jsxs)("table",{className:"w-full border",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border p-2",children:"Name"}),(0,t.jsx)("th",{className:"border p-2",children:"Quantity"}),(0,t.jsx)("th",{className:"border p-2",children:"Unit"}),(0,t.jsx)("th",{className:"border p-2",children:"Cost"}),(0,t.jsx)("th",{className:"border p-2",children:"Supplier"}),(0,t.jsx)("th",{className:"border p-2",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:d.map(e=>{var n,a;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border p-2",children:e.name}),(0,t.jsx)("td",{className:"border p-2",children:e.quantity}),(0,t.jsxs)("td",{className:"border p-2",children:[null==(n=e.measurementUnit)?void 0:n.name," (",null==(a=e.measurementUnit)?void 0:a.code,")"]}),(0,t.jsx)("td",{className:"border p-2",children:e.cost}),(0,t.jsx)("td",{className:"border p-2",children:e.supplierId}),(0,t.jsxs)("td",{className:"border p-2",children:[(0,t.jsx)("button",{className:"mr-2 text-blue-600",onClick:()=>{m(e),h(e.id)},children:"Edit"}),(0,t.jsx)("button",{className:"text-red-600",onClick:()=>{var n;return n=e.id,void fetch("/api/ingredients/".concat(n),{method:"DELETE"}).then(()=>void fetch("/api/ingredients").then(async e=>i(await e.json())))},children:"Delete"})]})]},e.id)})})]})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[441,684,358],()=>n(1371)),_N_E=e.O()}]);