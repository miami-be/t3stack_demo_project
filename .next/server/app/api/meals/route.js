(()=>{var e={};e.id=846,e.ids=[846],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>g,serverHooks:()=>h,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>x});var n={};r.r(n),r.d(n,{DELETE:()=>l,GET:()=>u,POST:()=>c,PUT:()=>p});var i=r(96559),s=r(48088),a=r(37719),o=r(32190);let d=new(r(96330)).PrismaClient;async function u(){try{let e=await d.meal.findMany({include:{ingredients:{include:{ingredient:!0}}},orderBy:{createdAt:"desc"}});return o.NextResponse.json(e)}catch(e){return o.NextResponse.json({error:String(e)},{status:500})}}async function c(e){try{let t=await e.json(),r=await d.meal.create({data:{name:t.name,description:t.description,recipe:t.recipe,price:Number(t.price),photoURL:t.photoURL,ingredients:t.ingredients&&t.ingredients.length>0?{create:t.ingredients.map(e=>({ingredientId:e.ingredientId,quantity:e.quantity}))}:void 0},include:{ingredients:{include:{ingredient:!0}}}});return o.NextResponse.json(r)}catch(e){return o.NextResponse.json({error:String(e)},{status:500})}}async function p(e){try{let t=new URL(e.url).searchParams.get("id");if(!t)return o.NextResponse.json({error:"Missing meal ID"},{status:400});let r=await e.json();await d.meal.update({where:{id:t},data:{name:r.name,description:r.description,recipe:r.recipe,price:r.price,photoURL:r.photoURL},include:{ingredients:{include:{ingredient:!0}}}}),r.ingredients&&(await d.mealIngredient.deleteMany({where:{mealId:t}}),await d.meal.update({where:{id:t},data:{ingredients:{create:r.ingredients.map(e=>({ingredientId:e.ingredientId,quantity:e.quantity}))}}}));let n=await d.meal.findUnique({where:{id:t},include:{ingredients:{include:{ingredient:!0}}}});return o.NextResponse.json(n)}catch(e){return o.NextResponse.json({error:String(e)},{status:500})}}async function l(e){try{let t=new URL(e.url).searchParams.get("id");if(!t)return o.NextResponse.json({error:"Missing meal ID"},{status:400});return await d.meal.delete({where:{id:t}}),o.NextResponse.json({success:!0})}catch(e){return o.NextResponse.json({error:String(e)},{status:500})}}let g=new i.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/meals/route",pathname:"/api/meals",filename:"route",bundlePath:"app/api/meals/route"},resolvedPagePath:"/Users/miami/Projects/t3stack_demo_project/src/app/api/meals/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:m,workUnitAsyncStorage:x,serverHooks:h}=g;function w(){return(0,a.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:x})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,190],()=>r(5403));module.exports=n})();