(()=>{var e={};e.id=697,e.ids=[697],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23519:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/miami/Projects/t3stack_demo_project/src/app/meals/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/miami/Projects/t3stack_demo_project/src/app/meals/page.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34752:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},35692:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68913:(e,t,r)=>{Promise.resolve().then(r.bind(r,79755))},69585:(e,t,r)=>{Promise.resolve().then(r.bind(r,89544))},69897:(e,t,r)=>{Promise.resolve().then(r.bind(r,73409))},71200:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},73409:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(60687),i=r(43210);function n(){let[e,t]=(0,i.useState)([]),[r,n]=(0,i.useState)(null),[a,o]=(0,i.useState)(!1),[l,d]=(0,i.useState)({name:"",description:"",recipe:"",price:"",photoURL:""}),[c,p]=(0,i.useState)(null),[m,u]=(0,i.useState)([]),[h,x]=(0,i.useState)([]),[b,v]=(0,i.useState)(!1),[f,g]=(0,i.useState)(null);async function y(){let e=await fetch("/api/meals"),r=await e.json();Array.isArray(r)?t(r):t([])}return(0,s.jsxs)("div",{className:"p-8 max-w-3xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Meals"}),r&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Meal Details"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"font-bold",children:r.name}),(0,s.jsx)("div",{className:"text-gray-700 mb-2",children:r.description}),(0,s.jsxs)("div",{className:"mb-2",children:["Price: ",(0,s.jsxs)("span",{className:"font-mono",children:["$",r.price.toFixed(2)]})]}),r.photoURL&&(0,s.jsx)("img",{src:r.photoURL,alt:r.name,className:"w-full h-40 object-cover rounded mb-2"}),(0,s.jsxs)("div",{className:"mb-2",children:["Recipe: ",(0,s.jsx)("span",{className:"font-mono",children:r.recipe})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Ingredients:"}),(0,s.jsx)("ul",{className:"list-disc ml-6",children:r.ingredients.map(e=>(0,s.jsxs)("li",{children:[e.ingredient.name," (",e.quantity,")"]},e.id))})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"bg-yellow-500 text-white px-4 py-2 rounded",onClick:async()=>{d({name:r.name,description:r.description,recipe:r.recipe,price:String(r.price),photoURL:r.photoURL??""}),x(r.ingredients.map(e=>({ingredientId:e.ingredient.id,quantity:String(e.quantity)}))),p(r.id),o(!0),n(null);try{let e=await fetch("/api/ingredients"),t=await e.json();Array.isArray(t)&&t.every(e=>"object"==typeof e&&null!==e&&"id"in e&&"name"in e)?u(t):u([])}catch{u([])}},children:"Edit"}),(0,s.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded",onClick:async()=>{if(window.confirm("Are you sure you want to delete this meal?")){v(!0),g(null);try{if(!(await fetch(`/api/meals?id=${r.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete meal");n(null),y()}catch(e){g("Failed to delete meal")}finally{v(!1)}}},children:"Delete"}),(0,s.jsx)("button",{className:"bg-gray-300 text-gray-800 px-4 py-2 rounded",onClick:()=>n(null),children:"Close"})]})]})}),(0,s.jsx)("button",{className:"mb-4 bg-blue-600 text-white px-4 py-2 rounded",onClick:async()=>{o(!0);try{let e=await fetch("/api/ingredients"),t=await e.json();Array.isArray(t)&&t.every(e=>"object"==typeof e&&null!==e&&"id"in e&&"name"in e)?u(t):u([])}catch{u([])}x([])},children:"Add Meal"}),a&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Meal":"Add Meal"}),(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),v(!0),g(null);try{let e;if(!(c?await fetch(`/api/meals?id=${c}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.name,description:l.description,recipe:l.recipe,price:Number(l.price),photoURL:l.photoURL,ingredients:h.map(e=>({ingredientId:e.ingredientId,quantity:Number(e.quantity)}))})}):await fetch("/api/meals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.name,description:l.description,recipe:l.recipe,price:Number(l.price),photoURL:l.photoURL,ingredients:h.map(e=>({ingredientId:e.ingredientId,quantity:Number(e.quantity)}))})})).ok)throw Error(c?"Failed to update meal":"Failed to add meal");o(!1),d({name:"",description:"",recipe:"",price:"",photoURL:""}),x([]),p(null),y()}catch(e){g(c?"Failed to update meal":"Failed to add meal")}finally{v(!1)}},className:"space-y-3",children:[(0,s.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Name",value:l.name,onChange:e=>d(t=>({...t,name:e.target.value})),required:!0}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Description",value:l.description,onChange:e=>d(t=>({...t,description:e.target.value})),required:!0}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Recipe",value:l.recipe,onChange:e=>d(t=>({...t,recipe:e.target.value})),required:!0}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Price",type:"number",min:"0",step:"0.01",value:l.price,onChange:e=>d(t=>({...t,price:e.target.value})),required:!0}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",placeholder:"Photo URL (optional)",value:l.photoURL,onChange:e=>d(t=>({...t,photoURL:e.target.value}))}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold mb-1",children:"Ingredients"}),h.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2 mb-2 items-center",children:[(0,s.jsxs)("select",{className:"border p-2 rounded flex-1",value:e.ingredientId,onChange:e=>{let r=[...h];r[t]&&(r[t].ingredientId=e.target.value,x(r))},required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select ingredient"}),m?.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," ",e.measurementUnit?`(${e.measurementUnit.name})`:""]},e.id))]}),(0,s.jsx)("input",{className:"border p-2 rounded w-24",type:"number",min:"0",step:"0.01",placeholder:"Quantity",value:e.quantity??"",onChange:e=>{let r=[...h];r[t]&&(r[t].quantity=e.target.value,x(r))},required:!0}),(0,s.jsx)("button",{type:"button",className:"text-red-600 px-2",onClick:()=>x(h.filter((e,r)=>r!==t)),children:"Remove"})]},t)),(0,s.jsx)("button",{type:"button",className:"bg-green-600 text-white px-2 py-1 rounded",onClick:()=>x([...h,{ingredientId:"",quantity:""}]),children:"Add Ingredient"})]}),f&&(0,s.jsx)("div",{className:"text-red-600 text-sm",children:f}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50",disabled:b,children:"Add"}),(0,s.jsx)("button",{type:"button",className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400",onClick:()=>o(!1),disabled:b,children:"Cancel"})]})]})]})}),(0,s.jsx)("ul",{className:"divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("li",{className:"py-4 flex justify-between items-center cursor-pointer hover:bg-gray-50",onClick:()=>n(e),children:[(0,s.jsxs)("span",{className:"flex items-center gap-2",children:["photoURL"in e&&e.photoURL&&(0,s.jsx)("img",{src:e.photoURL,alt:e.name,className:"w-12 h-12 object-cover rounded"}),(0,s.jsx)("span",{className:"font-semibold",children:e.name})," ",(0,s.jsxs)("span",{className:"text-gray-500",children:["(",e.description,")"]})]}),(0,s.jsxs)("span",{className:"font-mono",children:["$",e.price.toFixed(2)]})]},e.id))})]})}},79625:(e,t,r)=>{Promise.resolve().then(r.bind(r,23519))},79755:(e,t,r)=>{"use strict";r.d(t,{TRPCReactProvider:()=>h,F:()=>u});var s=r(60687),i=r(8693),n=r(68357),a=r(63839),o=r(43210),l=r(558),d=r(62087),c=r(72083);let p=()=>new d.E({defaultOptions:{queries:{staleTime:3e4},dehydrate:{serializeData:l.Ay.serialize,shouldDehydrateQuery:e=>(0,c.XS)(e)||"pending"===e.state.status},hydrate:{deserializeData:l.Ay.deserialize}}}),m=()=>p(),u=(0,a.pY)();function h(e){let t=m(),[r]=(0,o.useState)(()=>u.createClient({links:[(0,n.$H)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,n.N9)({transformer:l.Ay,url:(process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:`http://localhost:${process.env.PORT??3e3}`)+"/api/trpc",headers:()=>{let e=new Headers;return e.set("x-trpc-source","nextjs-react"),e}})]}));return(0,s.jsx)(i.QueryClientProvider,{client:t,children:(0,s.jsx)(u.Provider,{client:r,queryClient:t,children:e.children})})}},85753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(65239),i=r(48088),n=r(88170),a=r.n(n),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["meals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,23519)),"/Users/miami/Projects/t3stack_demo_project/src/app/meals/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/miami/Projects/t3stack_demo_project/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/miami/Projects/t3stack_demo_project/src/app/meals/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/meals/page",pathname:"/meals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},89544:(e,t,r)=>{"use strict";r.d(t,{TRPCReactProvider:()=>i});var s=r(12907);(0,s.registerClientReference)(function(){throw Error("Attempted to call api() from the server but api is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/miami/Projects/t3stack_demo_project/src/trpc/react.tsx","api");let i=(0,s.registerClientReference)(function(){throw Error("Attempted to call TRPCReactProvider() from the server but TRPCReactProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/miami/Projects/t3stack_demo_project/src/trpc/react.tsx","TRPCReactProvider")},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>o});var s=r(37413);r(35692);var i=r(4149),n=r.n(i),a=r(89544);let o={title:"Create T3 App",description:"Generated by create-t3-app",icons:[{rel:"icon",url:"/favicon.ico"}]};function l({children:e}){return(0,s.jsx)("html",{lang:"en",className:`${n().variable}`,children:(0,s.jsx)("body",{children:(0,s.jsx)(a.TRPCReactProvider,{children:e})})})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,164],()=>r(85753));module.exports=s})();